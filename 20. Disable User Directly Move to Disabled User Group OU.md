# Disable User and Move to "Disabled Users" OU (Step-by-Step Guide)

This guide helps you automate the process of managing disabled user accounts in Active Directory using PowerShell. You'll create a dedicated "Disabled Users" OU, move all disabled accounts into it, and make sure all accounts inside are disabled.

---

## ğŸ¯ Goal

Automatically:

* Create a **â€œDisabled Usersâ€** Organizational Unit (OU)
* **Move all disabled users** into that OU
* **Ensure all user accounts in that OU are actually disabled**

---

## ğŸ§° Requirements

Before you begin:

* You must be a **Domain Admin** or have equivalent rights.
* Run this script on a domain-joined system with the **Active Directory PowerShell module**.
* This guide assumes your domain is:
  `xitiztechservice.local`

---

## ğŸªœ Step-by-Step Instructions

---

### ğŸ—ï¸ Step 1: Create the "Disabled Users" OU (If It Doesnâ€™t Exist)

Before doing anything else, create the target OU.

Manually:
Create an **"Disabled Users"** under the xitiztechservice

OR

Powershell
```powershell
New-ADOrganizationalUnit -Name "Disabled Users" -Path "OU=xitiztechservice,DC=xitiztechservice,DC=local"
```

> âœ… If the OU already exists, this will throw an error â€” thatâ€™s okay, just move on.

---

### âœ… Step 2: Import the Active Directory Module

Make sure all AD cmdlets are available.

```powershell
Import-Module ActiveDirectory
```

---

### ğŸ” Step 3: List All Disabled AD Users

This step helps you **verify** which accounts are currently disabled.

```powershell
Search-ADAccount -AccountDisabled | Select-Object Name, DistinguishedName
```

---

### ğŸ“¦ Step 4: Move Disabled Users to the "Disabled Users" OU

Only move users who are **not already** in the "Disabled Users" OU:

```powershell
Search-ADAccount -AccountDisabled |
    Where-Object { $_.DistinguishedName -notlike "*OU=Disabled Users*" } |
    Move-ADObject -TargetPath "OU=Disabled Users,OU=xitiztechservice,DC=xitiztechservice,DC=local"
```

---

### ğŸš« Step 5: Ensure All Users in the "Disabled Users" OU Are Disabled

This double-checks that all users in the OU are actually disabled.

```powershell
Get-ADUser -Filter { Enabled -eq $True } `
    -SearchBase "OU=Disabled Users,OU=xitiztechservice,DC=xitiztechservice,DC=local" |
    Disable-ADAccount
```

---

ğŸ’» Final PowerShell Script (All-in-One)

```powershell
# Import the Active Directory module
Import-Module ActiveDirectory

# List all currently disabled user accounts
Search-ADAccount -AccountDisabled | Select-Object Name, DistinguishedName

# Move disabled users not already in the "Disabled Users" OU to the target OU
Search-ADAccount -AccountDisabled |
    Where-Object { $_.DistinguishedName -notlike "*OU=Disabled Users*" } | 
    Move-ADObject -TargetPath "OU=Disabled Users,OU=xitiztechservice,DC=xitiztechservice,DC=local"

# Ensure all users in the "Disabled Users" OU are disabled
Get-ADUser -Filter { Enabled -eq $True } `
    -SearchBase "OU=Disabled Users,OU=xitiztechservice,DC=xitiztechservice,DC=local" |
    Disable-ADAccount

```

----

## ğŸ“Œ Summary

This script:

* Creates the OU (if needed)
* Lists all disabled users
* Moves them into the OU
* Ensures all accounts in the OU are disabled

---

## ğŸ›¡ï¸ Tips

* Run in a **test environment** first.
* Add logging/output for auditing purposes.
* Can be scheduled or integrated into an offboarding workflow.

---
 
